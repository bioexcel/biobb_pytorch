{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "http://bioexcel.eu/biobb_pytorch/json_schemas/1.0/make_plumed",
    "name": "biobb_plumed GeneratePlumed",
    "title": "Generate PLUMED input for biased dynamics using an MDAE model.",
    "description": "Generates a PLUMED input file, features.dat, and converts the model to .ptc format.",
    "type": "object",
    "info": {
        "wrapped_software": {
            "name": "PLUMED with PyTorch",
            "version": ">=2.0",
            "license": "LGPL 3.0"
        },
        "ontology": {
            "name": "EDAM",
            "schema": "http://edamontology.org/EDAM.owl"
        }
    },
    "required": [
        "input_model_pth_path",
        "output_plumed_dat_path",
        "output_features_dat_path",
        "output_model_ptc_path"
    ],
    "properties": {
        "input_model_pth_path": {
            "type": "string",
            "description": "Path to the trained PyTorch model (.pth) to be converted to TorchScript and used in PLUMED",
            "filetype": "input",
            "sample": null,
            "enum": [
                ".*\\.pth$"
            ],
            "file_formats": [
                {
                    "extension": ".*\\.pth$",
                    "description": "Path to the trained PyTorch model (.pth) to be converted to TorchScript and used in PLUMED",
                    "edam": "format_2333"
                }
            ]
        },
        "input_stats_pt_path": {
            "type": "string",
            "description": "Path to statistics file (.pt) produced during featurization, used to derive the PLUMED features.dat content",
            "filetype": "input",
            "sample": null,
            "enum": [
                ".*\\.pt$"
            ],
            "file_formats": [
                {
                    "extension": ".*\\.pt$",
                    "description": "Path to statistics file (.pt) produced during featurization, used to derive the PLUMED features.dat content",
                    "edam": "format_2333"
                }
            ]
        },
        "input_reference_pdb_path": {
            "type": "string",
            "description": "Path to reference PDB used for FIT_TO_TEMPLATE actions when Cartesian features are present",
            "filetype": "input",
            "sample": null,
            "enum": [
                ".*\\.pdb$"
            ],
            "file_formats": [
                {
                    "extension": ".*\\.pdb$",
                    "description": "Path to reference PDB used for FIT_TO_TEMPLATE actions when Cartesian features are present",
                    "edam": "format_1476"
                }
            ]
        },
        "input_ndx_path": {
            "type": "string",
            "description": "Path to GROMACS index (NDX) file used to define groups when required by PLUMED",
            "filetype": "input",
            "sample": null,
            "enum": [
                ".*\\.ndx$"
            ],
            "file_formats": [
                {
                    "extension": ".*\\.ndx$",
                    "description": "Path to GROMACS index (NDX) file used to define groups when required by PLUMED",
                    "edam": "format_2033"
                }
            ]
        },
        "output_plumed_dat_path": {
            "type": "string",
            "description": "Path to the output PLUMED input file",
            "filetype": "output",
            "sample": null,
            "enum": [
                ".*\\.dat$"
            ],
            "file_formats": [
                {
                    "extension": ".*\\.dat$",
                    "description": "Path to the output PLUMED input file",
                    "edam": "format_2330"
                }
            ]
        },
        "output_features_dat_path": {
            "type": "string",
            "description": "Path to the output features.dat file describing the CVs to PLUMED",
            "filetype": "output",
            "sample": null,
            "enum": [
                ".*\\.dat$"
            ],
            "file_formats": [
                {
                    "extension": ".*\\.dat$",
                    "description": "Path to the output features.dat file describing the CVs to PLUMED",
                    "edam": "format_2330"
                }
            ]
        },
        "output_model_ptc_path": {
            "type": "string",
            "description": "Path to the output TorchScript model file (.ptc) for PLUMED's PYTORCH_MODEL action",
            "filetype": "output",
            "sample": null,
            "enum": [
                ".*\\.ptc$"
            ],
            "file_formats": [
                {
                    "extension": ".*\\.ptc$",
                    "description": "Path to the output TorchScript model file (.ptc) for PLUMED's PYTORCH_MODEL action",
                    "edam": "format_2333"
                }
            ]
        },
        "properties": {
            "type": "object",
            "properties": {
                "include_energy": {
                    "type": "boolean",
                    "default": true,
                    "wf_prop": false,
                    "description": "Whether to include ENERGY in PLUMED."
                },
                "bias": {
                    "type": "array",
                    "default": "[]",
                    "wf_prop": false,
                    "description": "List of biasing actions (e.g. METAD) to be added to the PLUMED file."
                },
                "prints": {
                    "type": "object",
                    "default": {
                        "ARG": "*",
                        "STRIDE": 1,
                        "FILE": "COLVAR"
                    },
                    "wf_prop": false,
                    "description": "PRINT command parameters (e.g. ARG, STRIDE, FILE)."
                },
                "group": {
                    "type": "object",
                    "default": {},
                    "wf_prop": false,
                    "description": "GROUP definition options (label, NDX group or atom selection parameters)."
                },
                "wholemolecules": {
                    "type": "object",
                    "default": {},
                    "wf_prop": false,
                    "description": "WHOLEMOLECULES options when using Cartesian coordinates."
                },
                "fit_to_template": {
                    "type": "object",
                    "default": {},
                    "wf_prop": false,
                    "description": "FIT_TO_TEMPLATE options (e.g. STRIDE, TYPE, etc.)."
                },
                "pytorch_model": {
                    "type": "object",
                    "default": {},
                    "wf_prop": false,
                    "description": "PYTORCH_MODEL options (label, PACE and other parameters)."
                }
            }
        }
    },
    "additionalProperties": false
}